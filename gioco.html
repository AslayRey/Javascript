<html>
    <head></head>
    <body>
        <button onclick="player1()">Player 1</button>
        <button onclick="player2()">Player 2</button>
        <script type="text/javascript">
            var vittoriaConsecutivaA = 0,
            vittoriaConsecutivaB = 0,
            playerA = 0,
            playerB = 0,
            tiroA = 0,
            tiroB = 0;
            var min = 1;
            var max = 6;
            
            function player1() {
                console.log("Dado lanciato da playerA");
                if(tiroA <= tiroB){
                    playerA = gira();
                    console.log("Lancio di A: " + playerA);
                    tiroA++;
                    vincitore();
                }
            }
            function player2() {
                console.log("Dado lanciato da playerB");
                if(tiroB <= tiroA){
                    playerB = gira();
                    console.log("Lancio di B: " + playerB);
                    tiroB++;
                    vincitore();
                }
            }

            function gira(){
                return Math.floor(Math.random() * (max - min) + min);
            }

            function vincitore (){
                if(tiroA == tiroB){
                    if(playerA > playerB){
                        vittoriaConsecutivaA++;
                        vittoriaConsecutivaB = 0;
                        checkDouble(true);
                        
                    } else if(playerB > playerA){
                        vittoriaConsecutivaB++;
                        vittoriaConsecutivaA = 0;
                        checkDouble(false);
                    } else {
                        vittoriaConsecutivaA = 0;
                        vittoriaConsecutivaB = 0;
                        console.log("Pareggio");
                    }
                }
            }

            function checkDouble(vincitore){
                if(vincitore && vittoriaConsecutivaA != 2){
                    console.log("Ha vinto A");
                } else if(!vincitore && vittoriaConsecutivaB !=2){
                    console.log("Ha vinto B");
                } else if(vittoriaConsecutivaA == 2){
                    vittoriaConsecutivaA = 0;
                    vittoriaConsecutivaB++;
                    console.log("Ha vinto B");
                } else if (vittoriaConsecutivaB ==2){
                    vittoriaConsecutivaA++;
                    vittoriaConsecutivaB = 0;
                    console.log("Ha vinto A");
                }
            }
        </script>
    </body>
</html>